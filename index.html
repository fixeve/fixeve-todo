<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fixeve ToDoリスト</title>
<style>
  body {
    font-family: "Hiragino Kaku Gothic ProN", sans-serif;
    background-color: #fff;
    text-align: center;
    margin: 0;
    padding: 20px;
  }
  h1 { color: #00ff00; font-size: 32px; }
  table {
    width: 95%; margin: 20px auto;
    border-collapse: collapse;
    border: 2px solid #000;
  }
  th, td {
    border: 1px solid #000;
    padding: 10px;
    font-size: 18px;
  }
  th { color: #00ff00; }
  select, input { font-size: 16px; }
  #addRow { margin-top: 15px; padding: 10px 20px; font-size: 16px; }
  a { display: block; color: #00ff00; margin-top: 20px; text-decoration: none; }
</style>
</head>
<body>
  <h1>ToDoリスト</h1>
  <table id="todoTable">
    <thead>
      <tr>
        <th>内容</th>
        <th>優先度</th>
        <th>期限</th>
        <th>進捗</th>
      </tr>
    </thead>
    <tbody id="todoBody"></tbody>
  </table>

  <button id="addRow">＋ 追加</button>
  <a href="https://fixeve.github.io/fixeve-home/">ホーム</a>

<script>
const body = document.getElementById("todoBody");
let todos = JSON.parse(localStorage.getItem("fixeve_todo") || "[]");

function render(){
  body.innerHTML="";
  todos.forEach((t,i)=>{
    let row = document.createElement("tr");
    row.innerHTML = `
      <td contenteditable="true" oninput="update(${i},'text',this.innerText)">${t.text||""}</td>
      <td><select onchange="update(${i},'priority',this.value)">
        <option ${t.priority==='△'?'selected':''}>△</option>
        <option ${t.priority==='◯'?'selected':''}>◯</option>
        <option ${t.priority==='◎'?'selected':''}>◎</option>
      </select></td>
      <td><input type="date" value="${t.deadline||""}" onchange="update(${i},'deadline',this.value)"></td>
      <td><select onchange="update(${i},'status',this.value)">
        <option ${t.status==='未'?'selected':''}>未</option>
        <option ${t.status==='完'?'selected':''}>完</option>
      </select></td>`;
    body.appendChild(row);
  });
  save();
}

function update(i,key,val){ todos[i][key]=val; save(); }
function save(){ localStorage.setItem("fixeve_todo", JSON.stringify(todos)); }
document.getElementById("addRow").onclick=()=>{ todos.push({}); render(); };

render();
</script>
</body>
</html>
